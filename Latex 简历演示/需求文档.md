核心可行性支撑
AI 一句话生成简历：用 LLM（如 GPT、DeepSeek）解析用户指令（含岗位、经历、技能），结合 ATS 优化规则生成结构化简历内容，再通过 PDF 生成组件（如 jsPDF）导出基础 PDF，参考 DeepSeek + 木及简历的组合思路。
PDF 在线编辑：集成网页端 PDF 编辑组件（如 Adobe Acrobat 在线版、PDF.js 二次开发），支持文本修改、格式调整、内容增删，满足直接编辑需求。
划词 AI 提问修改：通过前端划词监听功能，获取选中内容后，联动后端 LLM（用 LangChain + 向量库实现精准问答），返回修改建议（如量化优化、措辞润色），再同步更新 PDF 内容。
左右联动交互：用 Next.js/React 搭建双栏布局，左侧 AI 对话区支持实时消息流，右侧 PDF 区同步响应编辑和 AI 修改结果，保证操作即时反馈。  


参考/Users/wy770/AI 简历/Latex 简历演示的简历样子

不是你用户册看到的就是1个pDF。但是其实你这个pDF里面是用这个lab test，它编译而成的1个pDF的格式。然后我就需要的就是说你去 用户不需要去弄一个 latex 的代码 用户只看到一个 latex 的编译而成的 pdf  

只看到 pdf  底层是latex 格式转换来的


/Users/wy770/AI 简历/Latex 简历演示/需求文档里的 UI 图



需求流程
用户输入：一句话描述（岗位/年限/技术栈/亮点等）
例如："3年后端，Java/Go，投递后端工程师，擅长高并发与微服务"
后端处理流程：
第一步：LLM 将这句话解析并生成结构化的简历 JSON
第二步：将简历 JSON 转换为 LaTeX 代码（用户不可见）
第三步：使用 XeLaTeX 编译 LaTeX 代码生成 PDF（用户不可见）
用户看到的结果：
最终只看到一个 PDF 文件
用户不需要知道底层是 LaTeX
用户不需要编辑 LaTeX 代码
但底层确实是通过 LaTeX 编译生成的，保证排版质量
关键点
用户界面：只看到 PDF
底层实现：LaTeX 代码 → 编译 → PDF
用户体验：一句话输入，得到专业排版的 PDF 简历




需求分析
当前状态
✅ Demo 模板功能：点击"加载 Demo 模板"按钮，使用 
test_resume_demo.json
 固定数据生成 PDF
✅ AI 生成功能：点击"生成简历"按钮，AI 返回简历 JSON 数据
存在的问题
🔴 AI 生成的 JSON 数据无法正常渲染成 PDF

AI 返回的数据结构可能与 LaTeX 模板期望的结构不匹配
前端调用 
renderPDF
 时，传入的 AI 生成数据无法被正确处理
你的需求
目标：让 AI 生成的简历内容能够正常渲染成 PDF

要求：

✅ 保留 Demo 模板功能：不删除现有的 Demo 模板加载逻辑
🎯 修复 AI 生成路径：让 AI 返回的 JSON 数据能够被 LaTeX 生成器正确处理
📄 正常渲染：生成的 PDF 能够在右侧面板正确显示






const formatPrompt = `将以下简历文本转换为 JSON。

规则：
1. 根据内容自动识别字段类型（工作/实习/项目/竞赛/开源等）
2. 只提取原文信息，不添加、不修改
3. 用户没提供的字段不要生成
4. 字段名称要符合内容语义
5. 输出纯 JSON，不用 Markdown

简历文本：
${resumeText}

示例字段（根据实际内容选择）：
- name: 姓名
- contact: 联系方式
- summary: 个人简介
- experience: 工作经历
- internships: 实习经历
- projects: 项目经验
- competitions: 竞赛经历
- opensource: 开源贡献
- skills: 专业技能
- education: 教育经历
- awards: 获奖荣誉
- certifications: 资格证书
- publications: 论文发表

只提取用户提供的内容，不创造！`




当前问题
字段名映射太固定：只能处理预定义的字段（姓名、联系方式等）
结构假设太死板：假设 JSON 是扁平的，不能处理任意嵌套
不够通用：无法适应 AI 返回的各种 JSON 结构
你的需求
创建一个通用的 JSON 转换器，能够：

✅ 智能识别结构：自动理解任意嵌套的 JSON
✅ 灵活映射：不管 AI 返回什么结构，都能转换成 LaTeX 需要的格式
✅ 降级策略：如果通用方案失败，降级到固定映射

AI 返回 JSON
    ↓
通用转换器（新文件）
    ↓
尝试智能转换
    ↓
失败？→ 降级到固定映射（现有代码）
    ↓
LaTeX 模板




好了！JSON 生成成功了！但是生成简历后 PDF 预览不成功。我看到图片中 PDF 只显示了"姓名"、"实习经历"、"专业技能"、"教育经历"这几个标题，但没有具体内容。

问题是：JSON 结构与 LaTeX 模板期望的结构不匹配。

让我检查生成的 JSON 结构：

json
{
  "基本信息": {  // ❌ 问题：这是一个嵌套对象
    "姓名": "某某",
    "联系方式": "000-0000-0000"
  }
}
但 LaTeX 模板期望的是：

json
{
  "name": "某某",  // ✅ 直接在顶层
  "contact": {
    "phone": "000-0000-0000"
  }
}
问题在于：字段名映射函数没有处理"基本信息"这个嵌套对象





## 需求分析复述

### 核心改进思路
把每一步的**操作按钮直接放在引导弹窗内**，让用户可以**边看引导边操作**，而不是看完所有步骤再去找按钮。

---

### 第一步：配置 AI Key
| 当前 | 改进后 |
|------|--------|
| 只是文字说明 | 弹窗内直接提供**输入框** |
| 让用户手动去改 .env | 用户输入 Key → **自动写入 .env 文件** |

**需要新增**：后端 API 接口，支持写入 .env 文件

---

### 第二步：测试 AI 连接
| 当前 | 改进后 |
|------|--------|
| 文字说明"请点击 AI 联通测试" | 弹窗内直接放置**「AI 联通测试」按钮** |
| 用户要在弹窗外找按钮 | 用户直接在弹窗内点击测试 |

**逻辑**：
- ✅ 测试成功 → 自动进入第三步
- ❌ 测试失败 → 提示返回第一步重新配置

---

### 第三步：加载 Demo 模板
| 当前 | 改进后 |
|------|--------|
| 文字说明 | 弹窗内直接放置**「加载 Demo 模板」按钮** |

**逻辑**：加载成功 → 进入第四步

---

### 第四步：下载简历
| 当前 | 改进后 |
|------|--------|
| 文字说明 | 弹窗内直接放置**「下载 PDF」按钮** |

**逻辑**：下载完成 → 引导结束 🎉

---

### 总结
```
旧流程：看完4步说明 → 关闭弹窗 → 找按钮操作
新流程：第1步配置 → 第2步测试 → 第3步加载 → 第4步下载（全程在弹窗内完成）
```





## 需求理解复述

### 当前状态
- 访问 `localhost:5173` 直接进入**功能页面**（左侧输入 + 右侧 PDF 预览）

### 期望改动

#### 1. 新增首页（Landing Page）
| 元素 | 说明 |
|------|------|
| 风格 | 参考 amplift.ai，简洁现代的 Agent 风格 |
| 大标题 | 类似 "The Pro Agent for Resume" |
| 副标题 | 简短说明产品功能 |
| **输入框** | 从功能页移过来的"一句话说明（岗位/年限/技术栈/亮点）" |
| **生成按钮** | "生成简历" 按钮 |

#### 2. 用户流程
```
首页 → 输入一句话 → 点击"生成简历" → 自动跳转功能页 → 展示生成的 PDF
```

#### 3. 路由设计
| 路径 | 页面 |
|------|------|
| `/` | 首页（Landing Page） |
| `/app` 或 `/workspace` | 功能页（当前页面） |

#### 4. 功能页改动
- 移除"一句话说明"输入框（已移到首页）
- 保留 JSON 编辑、PDF 预览等高级功能
- 从首页跳转过来时，自动触发 AI 生成

---


## 需求分析

### 当前状态
- 用户必须从**首页输入一句话** → 跳转工作区 → 才能看到可视化编辑器
- 直接访问 `/workspace` 时，显示的是 ChatPanel（JSON 模式），且没有数据

### 期望功能
1. **直接访问工作区**：用户可以直接进入 `/workspace`
2. **默认数据**：进入时表单中已有**默认模板数据**（不是空的）
3. **默认 PDF 预览**：右侧显示默认模板的 PDF
4. **默认显示可视化编辑器**：而不是 JSON 编辑模式

### 实现思路

```
用户访问 /workspace
       ↓
  检测是否有数据
       ↓
┌──────┴──────┐
│ 无数据      │ 有数据（从首页来）
↓             ↓
加载默认模板   使用传入数据
↓             ↓
渲染默认 PDF  渲染对应 PDF
↓             ↓
└─────────────┘
       ↓
  显示可视化编辑器
```

### 默认模板数据
```json
{
  "name": "张三",
  "contact": { "phone": "138****8888", "email": "example@email.com" },
  "objective": "前端工程师",
  "education": [{ "title": "XX大学 - 计算机科学", "date": "2018-2022" }],
  "projects": [{ "title": "示例项目", "highlights": ["项目描述..."] }],
  "skills": ["JavaScript", "React", "Vue"],
  ...
}
```


进入方式	数据来源	行为
直接访问 /workspace	默认模板	加载默认模板 → 渲染 PDF → 显示可视化编辑器
从首页跳转	AI 生成	调用 AI 生成 → 渲染 PDF → 显示可视化编辑器





是的，当前流程是：

可视化表单 → JSON 数据 → LaTeX 模板 → XeLaTeX 编译 → PDF
具体步骤
可视化表单 → 用户编辑简历信息
JSON 数据 → 表单数据转为结构化 JSON
LaTeX 生成 → 
latex_generator.py
 将 JSON 转为 .tex 文件
编译 PDF → 调用 xelatex 编译生成 PDF



需求复述
当前行为
用户拖拽调整模块顺序（如把教育经历移到最上面）
需要**手动点击「保存并更新 PDF」**按钮
PDF 才会重新生成并反映新顺序
期望行为
用户拖拽调整模块顺序
PDF 预览自动实时更新，无需手动触发
拖拽结束 → 立即重新渲染 PDF → 显示新顺序



